
use lnk

label main
    call lnk::allocate
    pull head

    let index be 0
    let tail be head
    label create-loop
        call lnk::allocate
        pull new

        push new
        push tail
        call lnk::insert

        let tail be new

        let index be index plus 1
    if index lesser 9 goto create-loop


    let index be 0
    let iter be head
    label populate-loop
        let index be index plus 1

        write index into iter at Link::Content
        read iter from iter at Link::Next
    if iter unequal 0 goto populate-loop


    let iter be head
    label print-loop
        read elem from iter at Link::Content

        print elem

        read iter from iter at Link::Next
    if iter unequal 0 goto print-loop





